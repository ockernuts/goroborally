{
  "swagger": "2.0",
  "info": {
    "description": "Roborally Game server",
    "version": "0.0.1",
    "title": "Roborally",
    "contact": {
      "email": "wim.ockerman@telenet.be"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "basePath" : "/api",
  "schemes": [
    "http"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/boards" : {
      "get": {
        "description": "Retrieve details of boards availble on the server",
        "operationId" : "getBoards",
        "responses" : {
          "200": {
            "description": "boards response",
            "schema" : {
              "type" : "array", 
              "items" : {
                "$ref" : "#/definitions/board"
              }
            }
          }
        },
        "tags" : [ "Board"]
      }   
    },
    "/v1/boardinfos" : {
      "get": {
        "description": "Retrieve basic info of available boards on the server",
        "operationId" : "getBoardInfos",
        "responses" : {
          "200": {
            "description": "boards response",
            "schema" : {
              "type" : "array", 
              "items" : {
                "$ref" : "#/definitions/boardInfo"
              }
            }
          }
        },
        "tags" : [ "Board"]
      }   
    }
  },
  "definitions": {
    "boardInfo" : {
      "type" : "object",
      "description" : "Basic board info of an available board on the server",
      "required" : ["name", "description"],
      "properties" : {
        "name" : {
          "type" : "string"
        },
        "description" : {
          "type" : "string",
          "description" : "If not given upon creation a default description is generated"
        }
      }
    },
    "board" : {
      "type" : "object",
      "description" : "Roborally board on which a game can be played",
      "required" : [ 
        "name",
         "width",
         "height",
         "tiles"
      ],
      "properties" : {
        "name" : {
          "type" : "string"
        },
        "description" : {
          "type" : "string",
          "description" : "If not given upon creation a default description is generated"
        },
        "width" : {
          "type" : "integer",
          "minimum": 1
        },
        "height" : {
          "type" : "integer",
          "minimum": 1       
        },
        "tiles" : {
          "description" : "tiles of the board",
          "type": "array",
          "minItems": 1,
          "items" : {
            "$ref" : "#/definitions/tile"
          }
        }
      }
    },
    "tile": {
      "required" : [ "type", "x", "y"],
      "properties": {
        "type" : {
          "type" :"string",
          "enum" : [
            "plain",
            "hole",
            "belt",
            "fastbelt",
            "repair",
            "repair2x"
            ],
          "description" : "Type of the tile on the board. A plain tile is by default used for all tiles of a board for which no tile element was even given. As such ",
          "default": "plain"
        },
        "x" : {
          "type" : "integer",
          "minimum" : 1,
          "description" : "position of the tile on the board. Range: 0..board.width-1"
        },
        "y" : {
          "type" : "integer",
          "minimum" : 1,
          "description" : "position of the tile on the board. Range: 0..board.height-1"
        },
        "direction" :  {
          "$ref": "#/definitions/direction"
        }
      }
    },
    "direction" : {
      "type" : "string",
      "enum": [
        "left",
        "right",
        "up",
        "down",
        "auto"
      ],
      "default" : "auto",
      "description" : "Orientation of the tile. Required for tiles of type belt, fastbelt, gear. Gears must only use left or right, which is used as rotation direction then. Otherwize direction is by default set to auto, which calculates the direction when a board is read in based on the tile position. As such, one might never see an auto directed tile on the client side. This is done to get a better visual effect."
    }
  }
}